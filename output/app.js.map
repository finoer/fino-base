{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/_@finoer_finoer-invoke@0.0.13@@finoer/finoer-invoke/dist/src/index.js","webpack:///./project.ts","webpack:///./src/router/base.ts","webpack:///./src/router/index.ts","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","setStore","window","Apps","Database","this","namespace","data","existingProxy","spacename","Error","instance","keys","includes","isKeywordInThis","console","error","obj","currentSpace","initialData","assign","_spacename","proxyOfprototype","proxyOfcontent","undefined","forEach","log","_namespace","sharePropertyDefinition","set","newvalue","configurable","proxy","Proxy","target","receiver","Reflect","oldValue","push","GlobalContext","activeAppInfo","app","context","version","contextSourceCache","activedApplication","activeContext","Window","globalContext","global","getGlobalContext","removeChild","id","element","document","getElementById","body","baseInfoLoaded","childAppLoaded","Events","_events","type","listener","flag","indexOf","unshift","args","argument","fn","filter","orign","subscribe","AssetTypeEnum","tagLoadJs","src","scriptTag","timestamp","createJs","Promise","resolve","reject","onload","onerror","err","setTimeout","head","s2","appendChild","tagLoadCss","link","styleTag","createElement","Date","createCss","href","rel","getEntryJs","url","then","catch","e","BaseModuleContext","baseUrl","VueRuntimeContext","super","vue","getSandBoxJs","vueRouter","rootDom","setAttribute","Vue","VueRouter","use","router","routes","vm","el","render","h","attrs","$router","addRoutes","options","$destroy","PhaserRuntimeContext","phaser","Phaser","SpinePlugin","scenes","root","gameConfig","AUTO","width","innerWidth","height","innerHeight","resolution","autoFocus","transparent","parent","scene","scale","Scale","FIT","autoCenter","CENTER_BOTH","Game","initGame","length","pop","canvas","querySelector","map","index","add","destroy","plugins","removeScenePlugin","iter","callbackFn","prop","SnapshotSandbox","sandboxRunning","modifyPropsMap","appCache","_window","windowSnapshot","rawWindowInterval","setInterval","rawWindowClearInterval","clearInterval","async","mount","sandbox","runtime","status","active","dynamicElements","css","cssList","loadCss","init","LifeCircle","intervals","lifecircleFn","bootstrap","loadFn","activeProject","entryStatePath","domain","entry","isFrist","routingEventsListeningTo","captureEventListeners","isInCapturedEventListeners","eventName","list","Array","isArray","item","originalAddEventListener","addEventListener","originalRemoveEventLister","removeEventListener","originalPushState","history","pushState","originalReplaceState","replaceState","$data","invoke","runtimeInfino","appList","$event","registerEvents","free","intervalId","handler","timeout","patchInterval","apps","performAppChnage","activeApp","result","activeWhen","location","getAppShouldBeActive","js","unmountApps","getAppShouldBeUnmount","j","inactive","unmount","notify","setRuntimeContext","lifecircle","toLocaleLowerCase","getModuleJs","getContextResource","createContext","initRuntimeContext","baseDomain","assetsData","Image","fino","getStore","hijackHistory","hijackEventListener","me","state","title","rest","apply","reroute","onpopstate","event","purpol","addCapturedEventListeners","listenerFn","removeCapturedEventListeners","registerApps","factory","project","split","origin","treeData","projectMap","Map","queue","children","shift","projectList","planformTree","setProjectMap","plantformTree","moduleMap","setModuleMap","projects","next","back","go","current","plantform","return","plantformTreeData","props","require","description"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.finoerInvoke = {}));\n}(this, (function (exports) { 'use strict';\n\n  const namespace = 'FINO';\r\n  function setStore(key, value) {\r\n      if (!window[namespace]) {\r\n          window[namespace] = {};\r\n      }\r\n      window[namespace][key] = value;\r\n  }\r\n  function getStore(key) {\r\n      const fino = window[namespace];\r\n      return fino && fino[key] ? fino[key] : null;\r\n  }\n\n  let Apps = [];\r\n  function registerApps(app) {\r\n      setStore('root', 'root');\r\n      Apps = invoke.init(app);\r\n      return Apps;\r\n  }\n\n  // 判断是否是一个对象\r\n  const isObject = (obj) => typeof (obj) === 'object' && obj !== null;\r\n  function isKeywordInThis(key) {\r\n      const instance = new Database();\r\n      let keys = Object.keys(instance);\r\n      return keys.includes(key);\r\n  }\n\n  /**\r\n   * Provide data warehouse for fino framework\r\n   * @param { type }  - this is a backup\r\n   */\r\n  class Database {\r\n      constructor() {\r\n          // Namespace of module data\r\n          this.namespace = '';\r\n          // Database\r\n          this.data = {};\r\n          // Cache data key that has been set up proxy;\r\n          this.existingProxy = [];\r\n      }\r\n      /**\r\n       * Initialize the namespace of the currently activated project\r\n       * @param { string } - name namespace\r\n       */\r\n      init(spacename) {\r\n          if (!spacename) {\r\n              throw new Error('请传入命名空间');\r\n          }\r\n          // 重置上一个命名空间的状态\r\n          // this.reset()\r\n          this.namespace = spacename;\r\n      }\r\n      /**\r\n       * set up reactive data\r\n       * @param { object } - data 用户需要设置的数据\r\n       * @param { string? } - namespace 命名空间\r\n       */\r\n      set(data, namespace) {\r\n          if (namespace && isKeywordInThis(namespace)) {\r\n              console.error(`${namespace}是数据仓库的关键字，请更改命名空间`);\r\n              return;\r\n          }\r\n          if (!isObject(data)) {\r\n              console.error(`设置的数据必须是一个对象`);\r\n              return;\r\n          }\r\n          const currentSpace = namespace || this.namespace;\r\n          let initialData = this.data[currentSpace] || {};\r\n          // 设置数据\r\n          this.data[currentSpace] = Object.assign(initialData, data, {\r\n              _spacename: currentSpace\r\n          });\r\n          // 代理访问链\r\n          for (let key in data) {\r\n              this.proxyOfprototype(data, currentSpace, key);\r\n          }\r\n          // 代理内容\r\n          this.data[currentSpace] = this.proxyOfcontent(currentSpace);\r\n      }\r\n      /**\r\n       * Get the data of a module\r\n       * @param { string } - key 需要获取的数据的key值\r\n       * @param { string } - namespace 命名空间\r\n       */\r\n      get(key, namespace) {\r\n          // 如果key为空，返回所有数据\r\n          if (!key && namespace) {\r\n              return this.data[this.namespace];\r\n          }\r\n          // 如果不传第二个参数， 默认获取当前命名空间下面的数据\r\n          else if (key && !namespace && this.data[this.namespace] && this.data[this.namespace][key] !== undefined) {\r\n              return this.data[this.namespace][key];\r\n          }\r\n          // 如果穿了第二个参数， 那么获取相应命名空间下面的数据\r\n          else if (namespace && key && this.data[namespace]) {\r\n              return this.data[namespace][key];\r\n          }\r\n      }\r\n      /**\r\n       * Reset the data under the current namespace\r\n       */\r\n      clear() {\r\n          if (!this.data[this.namespace]) {\r\n              return;\r\n          }\r\n          const keys = Object.keys(this.data[this.namespace]);\r\n          keys.forEach(key => {\r\n              if (key === 'spacename') {\r\n                  return;\r\n              }\r\n              delete this[key];\r\n          });\r\n          this.data[this.namespace] = null;\r\n      }\r\n      /**\r\n       * Proxy access chain\r\n       * @param { object } - data 用户需要设置的数据\r\n       * @param { string } - namespace 命名空间\r\n       * @param { string } - key 数据的key\r\n       */\r\n      proxyOfprototype(data, namespace, key) {\r\n          if (key === '_spacename') {\r\n              return;\r\n          }\r\n          console.log(data);\r\n          const _namespace = namespace || this.namespace;\r\n          const sharePropertyDefinition = {\r\n              get: () => {\r\n                  return this.data[_namespace][key];\r\n              },\r\n              set: (newvalue) => {\r\n                  this.data[key] = newvalue;\r\n                  this.data[_namespace][key] = newvalue;\r\n              },\r\n              enumerable: true,\r\n              configurable: true,\r\n          };\r\n          Object.defineProperty(this, key, sharePropertyDefinition);\r\n      }\r\n      /**\r\n       * Proxy data content\r\n       * @param { string } - namespace 命名空间\r\n       */\r\n      proxyOfcontent(namespace) {\r\n          if (this.existingProxy.includes(namespace)) {\r\n              return this.data[namespace];\r\n          }\r\n          let proxy = new Proxy(this.data[namespace], {\r\n              get: (target, key, receiver) => {\r\n                  const res = Reflect.get(target, key, receiver);\r\n                  return res;\r\n              },\r\n              set: (target, key, value, receiver) => {\r\n                  const oldValue = target[key];\r\n                  if (target._spacename !== this.namespace && target._spacename !== 'global') {\r\n                      console.error('不允许修改其他数据仓库的数据');\r\n                      return oldValue;\r\n                  }\r\n                  const result = Reflect.set(target, key, value, receiver);\r\n                  return result;\r\n              }\r\n          });\r\n          this.existingProxy.push(namespace);\r\n          return proxy;\r\n      }\r\n  }\n\n  console.log('databnase改变了最终版8');\n\n  /**\r\n   * @class 全局单例\r\n   */\r\n  class GlobalContext {\r\n      constructor() {\r\n          // 当前需要加载的子模块\r\n          this.activeAppInfo = {\r\n              app: '',\r\n              context: '',\r\n              version: ''\r\n          };\r\n          // 资源缓存\r\n          this.contextSourceCache = {};\r\n          this.activedApplication = Apps[0];\r\n          this.activeContext = Window;\r\n      }\r\n      // 设置运行环境\r\n      setRuntimeContext(context) {\r\n          this.activeContext = context;\r\n      }\r\n  }\r\n  function getGlobalContext() {\r\n      const global = window;\r\n      if (global.globalContext) {\r\n          return global.globalContext;\r\n      }\r\n      global.globalContext = new GlobalContext();\r\n      // debugger\r\n      // console.log('database', Database)\r\n      // global.$data = new Database()\r\n      return global.globalContext;\r\n  }\r\n  const globalContext = getGlobalContext();\n\n  const BOOTSTRAP = 'BOOTSTRAP';\r\n  const MOUNT = 'MOUNT';\r\n  const UNMOUNT = 'UNMOUNT';\n\n  // import apps from '../model/index'\r\n  /**\r\n   * @function 获取当前应该被加载的应用\r\n   * @param { apps - 应用列表 }\r\n   * @return { app - 需要被加载的应用 }\r\n   */\r\n  function getAppShouldBeActive(apps) {\r\n      let result = { app: apps[0], index: 0 };\r\n      apps.forEach((item, index) => {\r\n          if (item.activeWhen(window.location) && item.status) {\r\n              item.status === UNMOUNT && (item.status = BOOTSTRAP);\r\n              result = {\r\n                  app: item,\r\n                  index: index\r\n              };\r\n          }\r\n      });\r\n      return result;\r\n  }\r\n  /**\r\n   * @function 获取当前应该被卸载的应用\r\n   * @param global\r\n   * @param { apps - 应用列表 }\r\n   * @return { app - 需要被加载的应用 }\r\n   */\r\n  function getAppShouldBeUnmount(apps) {\r\n      let result = [];\r\n      apps.forEach((item, index) => {\r\n          if (!item.activeWhen(window.location) && item.status === MOUNT) {\r\n              result.push({\r\n                  app: item,\r\n                  index: index\r\n              });\r\n          }\r\n      });\r\n      return result;\r\n  }\r\n  /**\r\n   * @func 进入loading模式\r\n   * @parans { show - 是否展示loading }\r\n   */\r\n  // 卸载标签\r\n  function removeChild(id) {\r\n      let element = document.getElementById(id);\r\n      element && document.body.removeChild(element);\r\n  }\r\n  function registerEvents(global) {\r\n      if (!global.$event) {\r\n          return;\r\n      }\r\n      global.$event.subscribe('baseInfoLoaded', baseInfoLoaded);\r\n      global.$event.subscribe('childAppLoaded', childAppLoaded);\r\n  }\r\n  function baseInfoLoaded(data) {\r\n      globalContext.activeAppInfo = data;\r\n      return data;\r\n  }\r\n  function childAppLoaded(data) {\r\n      globalContext.activedApplication = data;\r\n      return data;\r\n  }\n\n  class Events {\r\n      constructor() {\r\n          // 事件池\r\n          this._events = {};\r\n      }\r\n      /**\r\n       * 添加订阅方法\r\n       * @param type 订阅事件的类型（名字）\r\n       * @param listener 订阅事件的回调\r\n       * @param flay 插入顺序\r\n       */\r\n      subscribe(type, listener, flag) {\r\n          // 如果订阅的事件在事件池里面存在\r\n          if (this._events[type]) {\r\n              if (this._events[type].indexOf(listener) > -1) {\r\n                  return;\r\n              }\r\n              flag ?\r\n                  this._events[type].unshift(listener) :\r\n                  this._events[type].push(listener);\r\n              return;\r\n          }\r\n          this._events[type] = [listener];\r\n      }\r\n      /**\r\n       * 通知消息\r\n       * @param type 需要分发的事件的名字\r\n       * @param args 回调函数的参数\r\n       */\r\n      notify(type, args) {\r\n          let argument = args || [];\r\n          if (this._events[type]) {\r\n              this._events[type].forEach((fn) => fn.call(this, argument));\r\n          }\r\n      }\r\n      /**\r\n       * 移除当前绑定的事件\r\n       * @param type 事件类型\r\n       * @param listener 事件回调函数\r\n       */\r\n      removeListener(type, listener) {\r\n          if (this._events[type]) {\r\n              this._events[type].filter((fn) => {\r\n                  return fn !== listener && fn.orign !== listener;\r\n              });\r\n          }\r\n      }\r\n      /**\r\n       * 优先执行订阅\r\n       * @param type\r\n       * @param listener\r\n       */\r\n      prepend(type, listener) {\r\n          this.subscribe(type, listener, true);\r\n      }\r\n  }\n\n  const baseUrl = \"\";\r\n  var AssetTypeEnum;\r\n  (function (AssetTypeEnum) {\r\n      AssetTypeEnum[\"INLINE\"] = \"inline\";\r\n      AssetTypeEnum[\"EXTERNAL\"] = \"external\";\r\n  })(AssetTypeEnum || (AssetTypeEnum = {}));\r\n  function tagLoadJs(src) {\r\n      let { scriptTag, timestamp } = createJs();\r\n      return new Promise((resolve, reject) => {\r\n          scriptTag.onload = () => resolve(null);\r\n          scriptTag.onerror = (err) => {\r\n              setTimeout(() => {\r\n                  document.head.removeChild(scriptTag);\r\n                  let s2 = createJs();\r\n                  s2.scriptTag.onload = resolve;\r\n                  s2.scriptTag.onerror = reject;\r\n                  s2.scriptTag.src = baseUrl + src + \"?\" + timestamp;\r\n                  document.head.appendChild(s2.scriptTag);\r\n                  reject(err);\r\n              }, 1000);\r\n          };\r\n          scriptTag.src = baseUrl + src + \"?\" + timestamp;\r\n          scriptTag.id = baseUrl + src;\r\n          document.body.appendChild(scriptTag);\r\n      });\r\n  }\r\n  function tagLoadCss(link) {\r\n      let { styleTag, timestamp } = createCss();\r\n      return new Promise((resolve) => {\r\n          styleTag.onload = () => resolve(null);\r\n          styleTag.href = baseUrl + link + \"?\" + timestamp;\r\n          styleTag.rel = \"stylesheet\";\r\n          styleTag.id = baseUrl + link;\r\n          document.body.appendChild(styleTag);\r\n          resolve(null);\r\n      });\r\n  }\r\n  function getEntryJs(url) {\r\n      return new Promise((resolve, reject) => {\r\n          tagLoadJs(url).then(() => {\r\n              // 加载完成的内容会挂载到这个globalContext上\r\n              resolve(globalContext.activeAppInfo);\r\n          }).catch(e => {\r\n              reject(e);\r\n          });\r\n      });\r\n  }\r\n  function createCss() {\r\n      const styleTag = document.createElement('link');\r\n      const timestamp = +new Date();\r\n      styleTag.id = \"timestamp\";\r\n      return {\r\n          styleTag,\r\n          timestamp\r\n      };\r\n  }\r\n  function createJs() {\r\n      const scriptTag = document.createElement('script');\r\n      const timestamp = +new Date();\r\n      scriptTag.type = \"text/javascript\";\r\n      scriptTag.id = \"timestamp\";\r\n      return {\r\n          scriptTag,\r\n          timestamp\r\n      };\r\n  }\r\n  async function loadCss(cssList) {\r\n      for (let i = 0; i < cssList.length; i++) {\r\n          await tagLoadCss(cssList[i]);\r\n      }\r\n  }\n\n  /**\r\n   * @class 管理子模块的运行环境\r\n   * @mehtods {*} createContext\r\n   * @mehtods {*} loadContext\r\n   * @mehtods {*} unmountContext\r\n   */\r\n  class BaseModuleContext {\r\n      constructor(type) {\r\n          // 资源的base url\r\n          this.baseUrl = `https://cdn.bootcdn.net/ajax/libs`;\r\n          this.context = \"\";\r\n          this.context = type;\r\n      }\r\n      // 获取运行环境沙箱\r\n      getSandBoxJs(type, version) {\r\n          const url = `${this.baseUrl}/${type}/${version}/${type}.min.js`;\r\n          return tagLoadJs(url);\r\n      }\r\n  }\n\n  class VueRuntimeContext extends BaseModuleContext {\r\n      constructor() {\r\n          super(\"vue\");\r\n      }\r\n      /**\r\n       * @func { Get running environment resources }\r\n       * @param version\r\n       */\r\n      async getContextResource(version) {\r\n          if (globalContext.contextSourceCache.vue) {\r\n              return;\r\n          }\r\n          // 获取当前运行环境所需的资源\r\n          const context = await this.getSandBoxJs('vue', version);\r\n          const routerLib = await this.getSandBoxJs('vue-router', '3.4.3');\r\n          globalContext.contextSourceCache.vue = true;\r\n          globalContext.contextSourceCache.vueRouter = true;\r\n          return context;\r\n      }\r\n      /**\r\n       * @func {*} create vue runtime context\r\n       */\r\n      createContext(version) {\r\n          // create root node\r\n          let rootDom = document.createElement('div');\r\n          rootDom.setAttribute('id', 'fino-vue-root');\r\n          document.body.appendChild(rootDom);\r\n          window['Vue2'] = window['Vue'] || window['Vue2'];\r\n          window['Vue'] = undefined;\r\n          const Vue = window['Vue2'];\r\n          const VueRouter = window.VueRouter;\r\n          Vue.use(VueRouter);\r\n          const router = new VueRouter({\r\n              mode: 'history',\r\n              routes: []\r\n          });\r\n          const vue = window.vm = new Vue({\r\n              el: rootDom,\r\n              router,\r\n              render: (h) => h('div', { attrs: { id: 'fino-vue-root' } }, [\r\n                  h('RouterView')\r\n              ])\r\n          });\r\n          return vue;\r\n      }\r\n      /**\r\n       * @func { Injection router }\r\n       */\r\n      injectionRouter(routes) {\r\n          if (!this.instance) {\r\n              return;\r\n          }\r\n          this.instance.$router.addRoutes(routes);\r\n          this.instance.$router.options.routes = routes;\r\n      }\r\n      /**\r\n       * @func { Uninstall the runtime environment }\r\n       */\r\n      destroy() {\r\n          this.instance && this.instance.$destroy();\r\n          const element = document.getElementById('fino-vue-root');\r\n          element && document.body.removeChild(element);\r\n      }\r\n  }\n\n  /// <reference path=\"../types/phaser.d.ts\" />\r\n  class PhaserRuntimeContext extends BaseModuleContext {\r\n      constructor() {\r\n          super(\"phaser\");\r\n      }\r\n      /**\r\n       * @func 获取资源\r\n       * @param version\r\n       */\r\n      async getContextResource(version) {\r\n          if (globalContext.contextSourceCache.phaser) {\r\n              return;\r\n          }\r\n          // 获取当前运行环境所需的资源\r\n          const context = await this.getSandBoxJs('phaser', version);\r\n          //\r\n          const Phaser = window['Phaser'];\r\n          globalContext.contextSourceCache.phaser = true;\r\n          globalContext.contextSourceCache.SpinePlugin = true;\r\n          return Phaser;\r\n      }\r\n      /**\r\n       * @func {*} Initialize the phaser operating environment\r\n       */\r\n      createContext() {\r\n          // phaser3.23不可以异步注入场景， 因此需要在注入路由的时候创建实例\r\n      }\r\n      initGame(scenes) {\r\n          const root = document.createElement('div');\r\n          root.id = 'root';\r\n          document.body.appendChild(root);\r\n          // Create game instance\r\n          const gameConfig = {\r\n              type: Phaser.AUTO,\r\n              width: window.innerWidth,\r\n              height: window.innerHeight,\r\n              resolution: 2,\r\n              autoFocus: true,\r\n              transparent: true,\r\n              parent: root,\r\n              scene: scenes,\r\n              scale: {\r\n                  mode: Phaser.Scale.FIT,\r\n                  autoCenter: Phaser.Scale.CENTER_BOTH\r\n              },\r\n          };\r\n          // debugger\r\n          const game = new Phaser.Game(gameConfig);\r\n          return game;\r\n      }\r\n      /**\r\n       * @func {*} injection routing\r\n       */\r\n      injectionRouter(scenes) {\r\n          if (!this.instance) {\r\n              this.instance = this.initGame([scenes[scenes.length - 1]]);\r\n              scenes.pop();\r\n          }\r\n          let canvas = document.querySelector('#root');\r\n          canvas && canvas.setAttribute('style', `display: block`);\r\n          Object.keys(scenes).map((key, index) => {\r\n              this.instance && this.instance.scene.add(scenes[(key)].name, scenes[index]);\r\n          });\r\n      }\r\n      /**\r\n       * @func {*} destroy the current running instance\r\n       * @remark {}\r\n       */\r\n      destroy() {\r\n          if (!this.instance) {\r\n              return;\r\n          }\r\n          let canvas = document.querySelector('#root');\r\n          canvas && document.body.removeChild(canvas);\r\n          this.instance.destroy(true);\r\n          this.instance.plugins.removeScenePlugin('SpinePlugin');\r\n      }\r\n  }\n\n  /**\r\n   * @function { Initialize the runtime context }\r\n   * @param { context - runtime context type: like vue }\r\n   * @param { version - runtime context version: string }\r\n   *\r\n   */\r\n  async function initRuntimeContext(context, version) {\r\n      const runtimePool = {\r\n          vue: VueRuntimeContext,\r\n          phaser: PhaserRuntimeContext\r\n      };\r\n      const runtime = new runtimePool[context]();\r\n      await runtime.getContextResource(version);\r\n      runtime.instance = runtime.createContext(version);\r\n      return runtime;\r\n  }\n\n  function iter(obj, callbackFn) {\r\n      // eslint-disable-next-line guard-for-in, no-restricted-syntax\r\n      for (const prop in obj) {\r\n          if (obj.hasOwnProperty(prop)) {\r\n              callbackFn(prop);\r\n          }\r\n      }\r\n  }\r\n  class SnapshotSandbox {\r\n      constructor(name) {\r\n          this.type = 'Snapshot';\r\n          this.sandboxRunning = true;\r\n          this.modifyPropsMap = {};\r\n          // 缓存应用名字\r\n          this.appCache = [];\r\n          this.name = name;\r\n          this.proxy = window;\r\n      }\r\n      active() {\r\n          const _window = window;\r\n          // 记录当前快照\r\n          this.windowSnapshot = {};\r\n          this.modifyPropsMap[this.name] = this.modifyPropsMap[this.name] || {};\r\n          !this.appCache.includes(this.name) && this.appCache.push(this.name);\r\n          iter(_window, prop => {\r\n              this.windowSnapshot[prop] = _window[prop];\r\n          });\r\n          // 恢复之前的变更\r\n          Object.keys(this.modifyPropsMap[this.name]).forEach((p) => {\r\n              _window[p] = this.modifyPropsMap[this.name][p];\r\n          });\r\n          this.sandboxRunning = true;\r\n      }\r\n      inactive() {\r\n          const _window = window;\r\n          if (!this.windowSnapshot || !this.name) {\r\n              return;\r\n          }\r\n          this.modifyPropsMap[this.name] = {};\r\n          iter(window, prop => {\r\n              if (_window[prop] !== this.windowSnapshot[prop]) {\r\n                  // 记录变更，恢复环境\r\n                  this.modifyPropsMap[this.name][prop] = _window[prop];\r\n                  _window[prop] = this.windowSnapshot[prop];\r\n              }\r\n          });\r\n          if (process.env.NODE_ENV === 'development') {\r\n              console.info(`[andbox] ${this.name} origin window restore...`, Object.keys(this.modifyPropsMap[this.name]));\r\n          }\r\n          this.sandboxRunning = false;\r\n      }\r\n  }\n\n  const rawWindowInterval = window.setInterval;\r\n  const rawWindowClearInterval = window.clearInterval;\r\n  window.intervals = [];\r\n  function patchInterval(global) {\r\n      const _window = window;\r\n      global.clearInterval = (intervalId) => {\r\n          _window.intervals = _window.intervals.filter((id) => id !== intervalId);\r\n          return rawWindowClearInterval(intervalId);\r\n      };\r\n      global.setInterval = (handler, timeout, ...args) => {\r\n          const intervalId = rawWindowInterval(handler, timeout, ...args);\r\n          console.log('intervalId', intervalId);\r\n          if (!_window.intervals.includes(intervalId)) {\r\n              _window.intervals = [..._window.intervals, intervalId];\r\n          }\r\n          return intervalId;\r\n      };\r\n      return function free() {\r\n          _window.intervals.forEach((id) => {\r\n              global.clearInterval(id);\r\n          });\r\n      };\r\n  }\n\n  /**\r\n   * @methods { life cycle-bootstrap }\r\n   */\r\n  async function bootstrap(app, sandbox, loadFn) {\r\n      let activeProject;\r\n      const entryStatePath = app.domain + app.entry;\r\n      // Get application js packaging information\r\n      activeProject = await getEntryJs(entryStatePath);\r\n      // activate the sandbox\r\n      if (!sandbox.appCache.includes(app.name)) {\r\n          sandbox.name = app.name;\r\n          sandbox.active();\r\n      }\r\n      // load application entry file { init: () => {}, name: string, destory: () => {} }\r\n      globalContext.activedApplication = await loadFn(app.domain, globalContext.activeAppInfo);\r\n      removeChild(app.domain + app.entry);\r\n      // Execute mount life cycle\r\n      return mount(app, sandbox);\r\n  }\r\n  /**\r\n   * @methods { life cycle-mount }\r\n   * @des Create a running environment and inject routing\r\n   */\r\n  async function mount(app, sandbox) {\r\n      const runtime = globalContext.activeContext;\r\n      // The runtime context is initialized successfully, and the route is injected\r\n      if (app.status === MOUNT) {\r\n          globalContext.activedApplication = app;\r\n          sandbox.name = app.name;\r\n          sandbox.active();\r\n      }\r\n      app.dynamicElements.css && (await loadCss(app.dynamicElements.css));\r\n      if (app.name === globalContext.activedApplication.name) {\r\n          // injection router\r\n          globalContext.activedApplication.init && globalContext.activedApplication.init(runtime, globalContext.activeContext);\r\n      }\r\n      app.status = MOUNT;\r\n      return app;\r\n  }\r\n  /**\r\n   * @methods { life cycle-unmount }\r\n   * @des\r\n  */\r\n  async function unmount(apps, sandbox, mode) {\r\n      return new Promise((resolve) => {\r\n          if (!apps) {\r\n              resolve();\r\n          }\r\n          // resolve()\r\n          for (let i = 0; i < apps.length; i++) {\r\n              if (!apps[i].app.dynamicElements.js)\r\n                  continue;\r\n              // 卸载应用标签\r\n              for (let j = 0; j < apps[i].app.dynamicElements.js.length; j++) {\r\n                  removeChild(apps[i].app.dynamicElements.js[j]);\r\n              }\r\n              for (let j = 0; j < apps[i].app.dynamicElements.css.length; j++) {\r\n                  removeChild(apps[i].app.dynamicElements.css[j]);\r\n              }\r\n              if (mode === 'safe') {\r\n                  apps[i].app.dynamicElements.js = [];\r\n                  // 将状态设置位UNMOUNT\r\n                  apps[i].app.status = UNMOUNT;\r\n              }\r\n          }\r\n          sandbox.inactive();\r\n          resolve();\r\n      });\r\n  }\n\n  var LifeCircle;\r\n  (function (LifeCircle) {\r\n      LifeCircle[\"BOOTSTRAP\"] = \"bootstrap\";\r\n      LifeCircle[\"MOUNTED\"] = \"mount\";\r\n  })(LifeCircle || (LifeCircle = {}));\r\n  const lifecircleFn = { bootstrap, mount };\r\n  let isFrist = true;\r\n  class Invoke {\r\n      constructor() {\r\n          // Operating environment: whether to run on the base or the sub-module to run independently\r\n          this.runtimeInfino = true;\r\n          // Application List\r\n          this.appList = [];\r\n          // Run submodule: the first one by default\r\n          this.app = Apps[0];\r\n          // mode: safe or speed\r\n          this.mode = 'speed';\r\n          const global = window;\r\n          this.$event = global.$event = new Events();\r\n          this.sandbox = new SnapshotSandbox('');\r\n          registerEvents(global);\r\n          this.free = patchInterval(window);\r\n      }\r\n      /**\r\n       * @methods { Initialize the project list }\r\n       * @param apps { project list as array }\r\n       */\r\n      init(apps) {\r\n          apps.map((item, index) => {\r\n              item.status = BOOTSTRAP;\r\n          });\r\n          this.appList = apps;\r\n          this.performAppChnage(this.appList);\r\n          return this.appList;\r\n      }\r\n      /**\r\n       * @methods { Scheduling applications, uninstalling the runtime, and mounting new applications }\r\n       * @desc\r\n       * @params { - apps: Project child project list }\r\n       */\r\n      async performAppChnage(apps) {\r\n          // Get the application that needs to be mounted\r\n          const activeApp = getAppShouldBeActive(apps);\r\n          this.app = activeApp.app;\r\n          this.app.dynamicElements = this.app.dynamicElements || { js: [], css: [] };\r\n          // uninstall apps that do not require activation\r\n          const unmountApps = getAppShouldBeUnmount(apps);\r\n          // restore the sandbox environment\r\n          if (!isFrist) {\r\n              this.free();\r\n          }\r\n          isFrist = false;\r\n          if (unmountApps) {\r\n              await unmount(unmountApps, this.sandbox, this.mode);\r\n          }\r\n          if (this.app.status === MOUNT) {\r\n              globalContext.activedApplication = this.app;\r\n          }\r\n          // Trigger loading animation\r\n          if (!this.app.init) {\r\n              this.$event.notify('appLeave');\r\n          }\r\n          globalContext.activeContext = await this.setRuntimeContext(this.app);\r\n          // Get the life cycle function of the current application(bootstrap, mount)\r\n          const lifecircle = this.app.status.toLocaleLowerCase();\r\n          this.app = await lifecircleFn[lifecircle](this.app, this.sandbox, this.getModuleJs.bind(this));\r\n          // At this time, the various information of the app is ready, merge the cached information to the current app\r\n          this.app = Object.assign(this.app, globalContext.activeAppInfo, globalContext.activedApplication);\r\n          Apps[activeApp.index] = this.app;\r\n          this.$event.notify('appEnter');\r\n      }\r\n      /**\r\n       * @methods The application is successfully mounted, and the sub-application is notified\r\n       */\r\n      async setRuntimeContext(activeProject) {\r\n          if (!activeProject) {\r\n              return globalContext.activeContext;\r\n          }\r\n          // Create the runtime context\r\n          let runtime = globalContext.activeContext;\r\n          // If the runtime context of the new application is different from the previous one, uninstall it\r\n          if (!this.app.context || this.app.context !== globalContext.activeContext.context) {\r\n              activeProject.context &&\r\n                  Object.assign(globalContext.activeAppInfo, {\r\n                      context: activeProject.context, version: activeProject.version\r\n                  });\r\n              // uninstall before app runtime context,\r\n              if (runtime && runtime.destroy) {\r\n                  runtime.destroy();\r\n              }\r\n              // store the created runtime environment in the global\r\n              runtime = globalContext.activeContext = await initRuntimeContext(globalContext.activeAppInfo.context, globalContext.activeAppInfo.version);\r\n          }\r\n          else {\r\n              // If the runtime context is the same, reuse directly\r\n              runtime = globalContext.activeContext;\r\n          }\r\n          return runtime;\r\n      }\r\n      /**\r\n       * @methods Get application js\r\n       */\r\n      async getModuleJs(baseDomain, assetsData) {\r\n          // const assets = Object.keys(assetsData);\r\n          for (let i = 0; i < assetsData.length; i++) {\r\n              if (typeof (assetsData[i]) === 'string') {\r\n                  const entry = assetsData[i];\r\n                  const url = baseDomain + '/' + entry;\r\n                  if (entry.indexOf('.css') > -1) {\r\n                      this.app.dynamicElements.css.indexOf(url) === -1 &&\r\n                          this.app.dynamicElements.css.push(url);\r\n                      continue;\r\n                  }\r\n                  else if (entry.indexOf('.js') > -1) {\r\n                      await getEntryJs(url);\r\n                  }\r\n                  else {\r\n                      let source = new Image();\r\n                      source.src = url;\r\n                  }\r\n                  if (this.mode === 'safe') {\r\n                      this.app.dynamicElements.js.push(url);\r\n                  }\r\n                  continue;\r\n              }\r\n          }\r\n          return globalContext.activedApplication;\r\n      }\r\n      /**\r\n       * @methods { runtimeInFino }\r\n       * @desc { 确定当前是否在基座运行 }\r\n       */\r\n      isInFinoRuntime() {\r\n          return !!getStore('root');\r\n      }\r\n      start() {\r\n          setStore('root', 'root');\r\n      }\r\n  }\n\n  const routingEventsListeningTo = [\r\n      'popstate', 'hashChange'\r\n  ];\r\n  const captureEventListeners = {\r\n      'popstate': [],\r\n      'hashChange': [],\r\n  };\r\n  function isInCapturedEventListeners(eventName, fn) {\r\n      return find(captureEventListeners[eventName], fn);\r\n  }\r\n  function addCapturedEventListeners(eventName, fn) {\r\n      captureEventListeners[eventName].push(fn);\r\n  }\r\n  function removeCapturedEventListeners(eventName, listenerFn) {\r\n      captureEventListeners[eventName] = captureEventListeners[eventName].filter((fn) => fn !== listenerFn);\r\n  }\r\n  function find(list, element) {\r\n      if (!Array.isArray(list)) {\r\n          return false;\r\n      }\r\n      return list.filter(item => item === element).length > 0;\r\n  }\n\n  // 缓存原生事件， 后面需要重写\r\n  const originalAddEventListener = window.addEventListener;\r\n  const originalRemoveEventLister = window.removeEventListener;\r\n  const originalPushState = window.history.pushState;\r\n  const originalReplaceState = window.history.replaceState;\r\n  class Router {\r\n      constructor(invoke) {\r\n          this.invoke = invoke;\r\n          this.hijackHistory();\r\n          this.hijackEventListener();\r\n      }\r\n      reroute() {\r\n          this.invoke.app && this.invoke.performAppChnage(Apps);\r\n      }\r\n      push(url) {\r\n          // if(globalContext.activeContext.instance) {\r\n          // }\r\n          // globalContext.activeContext.instance.$router.push(url)\r\n          window.history.pushState(null, '', url);\r\n      }\r\n      hijackHistory() {\r\n          const me = this;\r\n          window.history.pushState = function (state, title, url, ...rest) {\r\n              let result = originalPushState.apply(this, [state, title, url]);\r\n              me.reroute();\r\n              return result;\r\n          };\r\n          window.history.replaceState = function (state, title, url, ...rest) {\r\n              let result = originalReplaceState.apply(this, [state, title, url]);\r\n              me.reroute();\r\n              return result;\r\n          };\r\n          window.onpopstate = (event) => {\r\n              me.reroute();\r\n          };\r\n          window.addEventListener('popstate', () => {\r\n              me.reroute();\r\n          }, false);\r\n      }\r\n      // EventListenerOrEventListenerObject\r\n      hijackEventListener() {\r\n          window.addEventListener = (eventName, fn, purpol) => {\r\n              if (typeof fn === 'function' &&\r\n                  routingEventsListeningTo.indexOf(eventName) > -1 &&\r\n                  !isInCapturedEventListeners(eventName, fn)) {\r\n                  addCapturedEventListeners(eventName, fn);\r\n                  return;\r\n              }\r\n              return originalAddEventListener.apply(window, [eventName, fn, purpol]);\r\n          };\r\n          window.removeEventListener = (eventName, fn, purpol) => {\r\n              if (typeof fn === 'function' && routingEventsListeningTo.indexOf(eventName) >= 0) {\r\n                  removeCapturedEventListeners(eventName, fn);\r\n                  return;\r\n              }\r\n              return originalRemoveEventLister.apply(window, [eventName, fn, purpol]);\r\n          };\r\n      }\r\n      handlePopState(event) {\r\n      }\r\n  }\n\n  const global = window;\r\n  const $data = global.$data = global.$data ? global.$data : new Database();\r\n  const invoke = new Invoke();\r\n  const router = new Router(invoke);\r\n  // initialize the data store of the current module\r\n  invoke.$event.subscribe('appEnter', () => {\r\n      global.$data && global.$data.init(invoke.app.name);\r\n  });\n\n  exports.$data = $data;\n  exports.invoke = invoke;\n  exports.registerApps = registerApps;\n  exports.router = router;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=index.js.map\n","const projectList = [\n  {\n      name: 'plantform_list',\n      activeWhen: function (location: Location) {\n        const route = window.location.href.split(window.location.origin)[1].split('/')[1]\n        return route === 'plantform_list'\n      },\n      domain: \"http://localhost:8081\",\n      entry: '/plantform_list/stats.js',\n      prop: {},\n      \"context\": \"vue\",\n      \"version\": \"2.6.2\"\n  },\n\n  {\n    name: 'yueqi',\n    activeWhen: function (location: Location) {\n      const route= window.location.href.split(window.location.origin)[1].split('/')[1]\n      return route === 'yueqi'\n    },\n    domain: \"http://localhost:8081\",\n    entry: '/yueqi/stats.js',\n    prop: {},\n    \"context\": \"vue\",\n    \"version\": \"2.6.2\"\n  },\n  {\n    name: 'jinzhao',\n    activeWhen: function (location: Location) {\n      const route= window.location.href.split(window.location.origin)[1].split('/')[1]\n      return route === 'jinzhao'\n    },\n    domain: \"http://localhost:8082\",\n    entry: '/jinzhao/stats.js',\n    \"context\": \"vue\",\n    \"version\": \"2.6.2\"\n  },\n  {\n    name: 'blue',\n    activeWhen: function (location: Location) {\n      const route= window.location.href.split(window.location.origin)[1].split('/')[1].split('?')[0]\n      return route === 'blue'\n    },\n    domain: \"http://localhost:8007\",\n    entry: '/rcms/stats.js',\n  },\n]\n\nexport default projectList\n","import { Project } from \"@finoer/finoer-invoke/dist/src/types/project\";\n\nclass BaseRouter {\n  setModuleMap(treeData: any, projectMap: Map<string, Project>) {\n    const data = new Map();\n    let queue: any[] = [];\n\n    while(treeData) {\n\n      data.set(treeData.name, projectMap.get(treeData.name))\n      if(treeData.children && treeData.children.length > 0) {\n        for(let i = 0; i < treeData.children.length; i++) {\n          queue.push(treeData.children[i])\n        }\n      }\n\n      treeData = queue.shift()\n    }\n\n    return data\n  }\n\n  setProjectMap(projectList: Array<Project>) {\n    const data = new Map()\n    for(let i in projectList) {\n      data.set(projectList[i].name, projectList[i])\n    }\n\n    return data\n  }\n}\n\n\nexport default BaseRouter\n","import { router, $data} from \"@finoer/finoer-invoke\";\nimport { Project } from \"@finoer/finoer-invoke/dist/src/types/project\";\nimport BaseRouter from \"./base\";\n\nclass Router extends BaseRouter{\n  // 已经注册过的项目列表\n  public projectMap: Map<string, Project>\n\n  // 学习产品树\n  public plantformTree: any\n\n  // 所有微前端模块项目\n  public moduleMap?: Map<string, Project>\n\n  constructor(projectList: any, planformTree: unknown) {\n    super();\n    this.projectMap = this.setProjectMap(projectList);\n    this.plantformTree = planformTree;\n\n    // 将树形的模块变为键值对的形式\n    this.moduleMap = this.setModuleMap(this.plantformTree.projects[0], this.projectMap)\n\n    console.log(this.moduleMap)\n\n    // console.log('currentTreeData',  this.plantformTree)\n  }\n\n  push(type: string) {\n    switch(type) {\n      case 'next':\n        this.next();\n        break;\n      case 'back':\n        this.back();\n      default:\n        this.go(type)\n    }\n  }\n\n  go(name: string) {\n    router.push(`/${name}`)\n  }\n\n  next() {\n    const current = $data.plantform.current\n\n    if(current.next) {\n      router.push(`/${current.next}`)\n    }\n  }\n\n  back() {\n    const current = $data.plantform.current\n\n    if(current.return) {\n      router.push(`/${current.return}`)\n    }\n  }\n\n}\n\nexport default Router\n","/**\n * @description example class\n * @author xxx\n * @since 2020.01.01\n *\n */\nimport { invoke, registerApps, $data } from '@finoer/finoer-invoke'\nimport projectList from '../project'\nimport Router from './router';\nimport Loading from './utils/loading'\n\n// 注册应用\nregisterApps(projectList)\n\ninvoke.mode = \"safe\"\n\nconst plantformTreeData = {\n  projects: [\n      {\n        name: 'plantform_list',\n        children: [\n            {\n                name: 'circle1',\n                children: [\n                    {\n                      name: 'template1',\n                      props: [\n                        {\n                          key: 'current',\n                          type: 'number',\n                          require: true,\n                          spacename: 'global',\n                          description: ''\n                        },\n                        {\n                          key: 'total',\n                          type: 'number',\n                          require: true,\n                          spacename: 'template1',\n                          description: ''\n                        },\n                      ]\n                    },\n                    {\n                      name: 'template2',\n                      props: [\n                        {\n                          key: 'current',\n                          type: 'number',\n                          require: true,\n                          spacename: 'global',\n                          description: ''\n                        }\n                      ]\n                    }\n                ]\n            }\n        ]\n      },\n      {\n        name: 'project2'\n      },\n      {\n        name: 'project3'\n      }\n  ],\n\n  current: {}\n};\n\n// 初始化数据仓库\nconst router = new Router(projectList, plantformTreeData)\n\n$data.set({plantform: plantformTreeData}, 'global')\n\nconsole.log($data)\n\n"],"sourceRoot":""}